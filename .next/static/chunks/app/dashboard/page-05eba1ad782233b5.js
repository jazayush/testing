(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4517:(e,s,a)=>{Promise.resolve().then(a.bind(a,9485))},8525:(e,s,a)=>{"use strict";a.d(s,{U:()=>r});var t=a(7241),i=a(7358);function r(){return(0,t.createBrowserClient)(i.env.NEXT_PUBLIC_SUPABASE_URL,i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},9485:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(5155),i=a(2115),r=a(4926),n=a(508),l=a(5239),o=a(63),c=a(8525);function d(){let e=(0,o.useRouter)(),[s,a]=(0,i.useState)({name:"",email:"",age:0,occupation:"",income:0,expenses:0,savings:0,dateOfJoining:""}),[d,m]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{let s=(0,c.U)(),{data:{user:t},error:i}=await s.auth.getUser();if(console.log("[v0] Dashboard - Fetching user data, user:",null==t?void 0:t.id),i||!t){console.error("[v0] Dashboard - Auth error or no user:",i),e.push("/");return}let{error:r}=await s.from("login_details").update({login_session_end_time:new Date().toISOString()}).eq("user_id",t.id).order("login_session_start_time",{ascending:!1}).limit(1);r&&console.error("[v0] Dashboard - Error updating login session:",r);let{data:n,error:l}=await s.from("user_onboarding_information").select("*").eq("user_id",t.id).single();if(l){if(console.error("[v0] Dashboard - Error fetching onboarding data:",l),"PGRST116"===l.code){console.log("[v0] Dashboard - No onboarding data found, redirecting to onboarding"),e.push("/onboarding");return}m(!1);return}n&&(console.log("[v0] Dashboard - Onboarding data loaded successfully"),a({name:n.name||"User",email:t.email||"",age:n.age||0,occupation:n.occupation||"",income:n.income_per_month||0,expenses:n.expenses_per_month||0,savings:n.savings_per_month||0,dateOfJoining:new Date(n.created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})),m(!1)})()},[e]);let g=async()=>{let s=(0,c.U)(),{data:{user:a}}=await s.auth.getUser();a&&await s.from("login_details").update({login_session_end_time:new Date().toISOString()}).eq("user_id",a.id).order("login_session_start_time",{ascending:!1}).limit(1),await s.auth.signOut(),console.log("[v0] Dashboard - User logged out"),e.push("/")},x=[{label:"MONTHLY INCOME",value:"₹".concat(s.income.toLocaleString()),color:"bg-green-500/10"},{label:"MONTHLY EXPENSES",value:"₹".concat(s.expenses.toLocaleString()),color:"bg-red-500/10"},{label:"MONTHLY SAVINGS",value:"₹".concat(s.savings.toLocaleString()),color:"bg-blue-500/10"}];return d?(0,t.jsx)("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:(0,t.jsx)("div",{className:"text-xl font-semibold text-gray-600",children:"Loading..."})}):(0,t.jsxs)("div",{className:"h-full w-full overflow-y-auto bg-gray-50",children:[(0,t.jsxs)("div",{className:"relative text-white p-8 pb-12 overflow-hidden",children:[(0,t.jsxs)("div",{className:"absolute inset-0",children:[(0,t.jsx)(l.default,{src:"/images/sip-growth-chart.png",alt:"SIP Growth Chart",fill:!0,className:"object-cover",priority:!0}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/20"})]}),(0,t.jsxs)("div",{className:"relative z-10 flex justify-between items-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",style:{fontFamily:"var(--font-space-grotesk), 'Space Grotesk', sans-serif"},children:"Finance Setu Dashboard"}),(0,t.jsxs)("button",{onClick:g,className:"flex items-center gap-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm px-4 py-2 rounded-lg transition-colors",children:[(0,t.jsx)(r.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Logout"})]})]})]}),(0,t.jsx)("div",{className:"p-8 -mt-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-6",children:"User Profile"}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(n.A,{className:"h-10 w-10 text-blue-600"})}),(0,t.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Name"}),(0,t.jsx)("p",{className:"text-base font-semibold text-gray-900",children:s.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),(0,t.jsx)("p",{className:"text-base font-medium text-gray-700",children:s.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Date of Joining"}),(0,t.jsx)("p",{className:"text-base font-medium text-gray-700",children:s.dateOfJoining})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Age"}),(0,t.jsxs)("p",{className:"text-base font-medium text-gray-700",children:[s.age," years"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Occupation"}),(0,t.jsx)("p",{className:"text-base font-medium text-gray-700",children:s.occupation})]})]})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-6",children:"Financial Overview"}),(0,t.jsx)("div",{className:"space-y-4",children:x.map((e,s)=>(0,t.jsxs)("div",{className:"".concat(e.color," rounded-lg p-4"),children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-gray-600 mb-1",children:e.label}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value})]},s))})]})]})})]})}}},e=>{e.O(0,[498,185,441,255,358],()=>e(e.s=4517)),_N_E=e.O()}]);